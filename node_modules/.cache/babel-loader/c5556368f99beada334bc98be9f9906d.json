{"remainingRequest":"D:\\vue_pro\\mila-admin3\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_pro\\mila-admin3\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue_pro\\mila-admin3\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\vue_pro\\mila-admin3\\src\\components\\Role\\edit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\vue_pro\\mila-admin3\\src\\components\\Role\\edit.vue","mtime":1619081219287},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiBbXSwKICAgICAgY2hlY2tMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hlY2tMaXN0KTsKICAgICAgdmFyIHJvbGVJZCA9IHRoaXMuZm9ybS5pZDsKICAgICAgdmFyIG5hbWUgPSB0aGlzLmZvcm0ubmFtZTsgLy/ovazmiJDlrZfnrKbkuLIKCiAgICAgIHZhciBydWxlSWQgPSB0aGlzLmNoZWNrTGlzdC50b1N0cmluZygpOwogICAgICB0aGlzLiRheGlvcy5wb3N0KCcvYXBpL2FkbWluL3JvbGUvZWRpdCcsIHsKICAgICAgICByb2xlSWQ6IHJvbGVJZCwKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIHJ1bGVJZDogcnVsZUlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDEpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJyb2xlTGlzdCIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/pgJrov4fop5LoibJpZOiOt+WPluaJgOWxnueahOi3r+eUseaPj+i/sAogICAgZ2V0UnVsZURlc2NCeVJvbGVJZDogZnVuY3Rpb24gZ2V0UnVsZURlc2NCeVJvbGVJZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcy5wb3N0KCcvYXBpL2FkbWluL3JvbGUvZ2V0UnVsZURlc2NCeVJvbGVJZCcsIHsKICAgICAgICByb2xlSWQ6IHRoaXMuZm9ybS5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKTsKICAgICAgICBfdGhpczIuY2hlY2tMaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5bmiYDmnInot6/nlLHkv6Hmga8KICAgIGdldFJ1bGU6IGZ1bmN0aW9uIGdldFJ1bGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2FwaS9hZG1pbi9yb2xlL2dldFJ1bGUnKS50aGVuKGZ1bmN0aW9uIChyZSkgewogICAgICAgIF90aGlzMy5ydWxlcyA9IHJlLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIHJvbGUgPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIHRoaXMuZm9ybS5pZCA9IHJvbGUuaWQ7CiAgICB0aGlzLmZvcm0ubmFtZSA9IHJvbGUubmFtZTsKICAgIHRoaXMuZ2V0UnVsZSgpOwogICAgdGhpcy5nZXRSdWxlRGVzY0J5Um9sZUlkKCk7CiAgfQp9Ow=="},{"version":3,"sources":["D:\\vue_pro\\mila-admin3\\src\\components\\Role\\edit.vue"],"names":[],"mappings":";;;AAyBC,eAAe;AACd,EAAA,IADc,kBACP;AACN,WAAO;AACN,MAAA,IAAI,EAAE;AACL,QAAA,EAAE,EAAC,EADE;AAEL,QAAA,IAAI,EAAE;AAFD,OADA;AAKN,MAAA,KAAK,EAAC,EALA;AAMN,MAAA,SAAS,EAAE;AANL,KAAP;AAQA,GAVa;AAWd,EAAA,OAAO,EAAE;AACR,IAAA,QADQ,sBACG;AAAA;;AAGV,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,SAAjB;AAEA,UAAI,MAAK,GAAI,KAAK,IAAL,CAAU,EAAvB;AACA,UAAI,IAAG,GAAI,KAAK,IAAL,CAAU,IAArB,CANU,CAOV;;AACA,UAAI,MAAK,GAAI,KAAK,SAAL,CAAe,QAAf,EAAb;AAIA,WAAK,MAAL,CAAY,IAAZ,CAAiB,sBAAjB,EAAwC;AACvC,QAAA,MAAM,EAAC,MADgC;AAEvC,QAAA,IAAI,EAAC,IAFkC;AAGvC,QAAA,MAAM,EAAC;AAHgC,OAAxC,EAKG,IALH,CAKQ,UAAA,GAAE,EAAK;AAEd,YAAG,GAAG,CAAC,IAAJ,CAAS,IAAT,IAAiB,CAApB,EAAsB;AAErB,UAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAC,YAAA,IAAI,EAAC;AAAN,WAAlB;AAED;AAEA,OAbD;AAgBA,KA7BO;AA8BR;AACA,IAAA,mBA/BQ,iCA+Ba;AAAA;;AAEpB,WAAK,MAAL,CAAY,IAAZ,CAAiB,qCAAjB,EAAuD;AAEtD,QAAA,MAAM,EAAC,KAAK,IAAL,CAAU;AAFqC,OAAvD,EAIG,IAJH,CAIQ,UAAA,GAAE,EAAK;AAEd,QAAA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,IAAJ,CAAS,IAArB;AAEA,QAAA,MAAI,CAAC,SAAL,GAAiB,GAAG,CAAC,IAAJ,CAAS,IAA1B;AAEA,OAVD;AAYA,KA7CO;AA8CR;AACA,IAAA,OA/CQ,qBA+CE;AAAA;;AAET,WAAK,MAAL,CAAY,IAAZ,CAAiB,yBAAjB,EACE,IADF,CACO,UAAA,EAAC,EAAK;AAEX,QAAA,MAAI,CAAC,KAAL,GAAa,EAAE,CAAC,IAAH,CAAQ,IAArB;AAEA,OALF;AAOD;AAxDQ,GAXK;AAuEd,EAAA,OAvEc,qBAuEJ;AAET,QAAI,IAAG,GAAI,KAAK,MAAL,CAAY,KAAvB;AAEA,SAAK,IAAL,CAAU,EAAV,GAAe,IAAI,CAAC,EAApB;AACA,SAAK,IAAL,CAAU,IAAV,GAAiB,IAAI,CAAC,IAAtB;AAEA,SAAK,OAAL;AAEA,SAAK,mBAAL;AACD;AAjFc,CAAf","sourcesContent":["<template>\r\n\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t<div style=\"width:20%\">\r\n\t\t\t<el-form-item label=\"角色名称\">\r\n\t\t\t\t<el-input v-model=\"form.name\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t</div>\r\n\r\n\t\t<el-form-item label=\"路由权限\">\r\n\t\t\t<el-checkbox-group v-model=\"checkList\">\r\n\r\n\t\t\t\t<el-checkbox v-for=\"(rule,index) in rules\" :label=\"rule.desc\" name=\"checkList\" :key=\"index\">{{ rule.desc }}\r\n\t\t\t\t</el-checkbox>\r\n\r\n\t\t\t</el-checkbox-group>\r\n\t\t</el-form-item>\r\n\r\n\t\t<el-form-item>\r\n\t\t\t<el-button type=\"primary\" @click=\"onSubmit\">立即提交</el-button>\r\n\t\t\t<el-button>取消</el-button>\r\n\t\t</el-form-item>\r\n\t</el-form>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\tid:'',\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t},\r\n\t\t\t\trules:[],\r\n\t\t\t\tcheckList: [],\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonSubmit() {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(this.checkList)\r\n\t\t\t\t\r\n\t\t\t\tlet roleId = this.form.id;\r\n\t\t\t\tlet name = this.form.name;\r\n\t\t\t\t//转成字符串\r\n\t\t\t\tlet ruleId = this.checkList.toString();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tthis.$axios.post('/api/admin/role/edit',{\r\n\t\t\t\t\troleId:roleId,\r\n\t\t\t\t\tname:name,\r\n\t\t\t\t\truleId:ruleId\r\n\t\t\t\t\t\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(res.data.code == 1){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$router.push({name:\"roleList\"});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\t\t\t//通过角色id获取所属的路由描述\r\n\t\t\tgetRuleDescByRoleId(){\r\n\t\t\t\t\r\n\t\t\t\tthis.$axios.post('/api/admin/role/getRuleDescByRoleId',{\r\n\t\t\t\t\t\r\n\t\t\t\t\troleId:this.form.id\r\n\t\t\t\t\t\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.checkList = res.data.data;\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//获取所有路由信息\r\n\t\t\tgetRule() {\r\n\t\t\t\r\n\t\t\t\tthis.$axios.post('/api/admin/role/getRule')\r\n\t\t\t\t\t.then(re => {\r\n\t\t\t\r\n\t\t\t\t\t\tthis.rules = re.data.data;\r\n\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\r\n\t\t\t}\r\n\r\n\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\t\t\tlet role = this.$route.query;\r\n\t\t\t\r\n\t\t\tthis.form.id = role.id;\r\n\t\t\tthis.form.name = role.name;\r\n\r\n\t\t\tthis.getRule();\r\n\r\n\t\t\tthis.getRuleDescByRoleId();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}]}