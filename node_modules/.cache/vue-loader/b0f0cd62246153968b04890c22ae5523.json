{"remainingRequest":"D:\\vue_pro\\mila-admin3\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\vue_pro\\mila-admin3\\src\\components\\Category\\list.vue?vue&type=style&index=0&id=8f82d0e2&lang=css","dependencies":[{"path":"D:\\vue_pro\\mila-admin3\\src\\components\\Category\\list.vue","mtime":1619053418045},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1616796459000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_pro\\mila-admin3\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJLmRlbW8tZm9ybS1pbmxpbmUgew0KCQlmbG9hdDogcmlnaHQ7DQoJfQ0KDQoJLmVsLXRhYmxlX19leHBhbmQtaWNvbiAuZWwtaWNvbi1hcnJvdy1yaWdodDpiZWZvcmUgew0KCQljb250ZW50OiAiXGU3MjMiOw0KCX0NCg=="},{"version":3,"sources":["D:\\vue_pro\\mila-admin3\\src\\components\\Category\\list.vue"],"names":[],"mappings":";CAmOC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;CACb;;CAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAClD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACjB","file":"D:/vue_pro/mila-admin3/src/components/Category/list.vue","sourceRoot":"","sourcesContent":["<template>\r\n\t<el-button type=\"primary\" @click=\"dialogFormVisible = true\">新增</el-button>\r\n\r\n\t<el-dialog title=\"新增顶级栏目\" v-model=\"dialogFormVisible\" @close=\"resetFrom()\">\r\n\t\t<el-form :model=\"form\">\r\n\t\t\t<el-form-item label=\"栏目名称\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t<el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<template #footer>\r\n\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addTopCategory()\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</template>\r\n\t</el-dialog>\r\n\t\r\n\t<el-dialog title=\"新增子栏目\" v-model=\"dialogFormVisible1\" @close=\"resetFrom()\">\r\n\t\t<el-form :model=\"form1\">\r\n\t\t\t<el-form-item label=\"栏目名称\" :label-width=\"formLabelWidth\">\r\n\t\t\t\t<el-input v-model=\"form1.name\" autocomplete=\"off\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<template #footer>\r\n\t\t\t<span class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addSonCategory()\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</template>\r\n\t</el-dialog>\r\n\r\n\t<el-table :data=\"tableData\" stripe row-key=\"id\" :tree-props=\"{children:'children'}\" style=\"width: 100%\">\r\n\t\t<el-table-column prop=\"id\" label=\"id\" width=\"180\" type=\"\">\r\n\t\t</el-table-column>\r\n\t\t<el-table-column prop=\"name\" label=\"名称\" width=\"180\">\r\n\t\t</el-table-column>\r\n\r\n\t\t<el-table-column label=\"操作\" width=\"280\">\r\n\t\t\t<template #default=\"scope\">\r\n\t\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"getPid(scope.row)\">添加子分类</el-button>\r\n\t\t\t\t<el-button type=\"warning\" size=\"mini\" @click=\"updateCategory(scope.row)\">编辑</el-button>\r\n\t\t\t\t<el-button type=\"danger\" size=\"mini\" @click=\"deleteCategory(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t</template>\r\n\t\t</el-table-column>\r\n\t</el-table>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tElMessage\r\n\t} from 'element-plus';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\tdialogFormVisible1: false,\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t},\r\n\t\t\t\tform1: {\r\n\t\t\t\t\tpid:'',\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t},\r\n\t\t\t\tformLabelWidth: '120px'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\tgetCategory() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\t//弄明白前端如何设置跨域\r\n\t\t\t\tthis.$axios.get('http://tests.com/admin/category/lists')\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t//then方法里面不能使用this 函数里面使用this代表的是函数本身，所以无法访问外部的变量\r\n\t\t\t\t\t\t//函数外部定义const that = this来代替this 或者将then这种函数改成箭头函数例如getCategory1\r\n\r\n\t\t\t\t\t\tthat.tableData = response.data\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t// getCategory1(){\r\n\r\n\t\t\t// \tthis.$axios.get('http://tests.com/category')\r\n\t\t\t//箭头函数不会创建自己的this，只会继承上层的this\r\n\t\t\t// \t.then(response => {\r\n\r\n\t\t\t// \t\tconsole.log(response)\r\n\r\n\t\t\t// \t\tthis.tableData = response.data\r\n\r\n\t\t\t// \t})\r\n\t\t\t// \t.catch(error => {\r\n\r\n\t\t\t// \t\tconsole.log(error)\r\n\r\n\t\t\t// \t})\r\n\r\n\t\t\t// },\r\n\t\t\tresetFrom() {\r\n\t\t\t\t//关闭和取消弹窗将name字段重置为空\r\n\t\t\t\tthis.form.name = '',\r\n\t\t\t\tthis.form1.name = ''\r\n\r\n\t\t\t},\r\n\t\t\t//新增顶级栏目\r\n\t\t\taddTopCategory() {\r\n\r\n\t\t\t\tthis.$axios.post('/api/admin/category/addTopCategory', {\r\n\t\t\t\t\t\tname: this.form.name\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t//关闭弹窗，重新请求数据填充\r\n\t\t\t\t\t\tthis.dialogFormVisible = false\r\n\t\t\t\t\t\tthis.getCategory()\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t//删除栏目\r\n\t\t\t//如何将当前条的id传递过来\r\n\t\t\tdeleteCategory(index, row) {\r\n\r\n\t\t\t\tconsole.log(index, row);\r\n\r\n\t\t\t\tthis.$confirm('确定删除该栏目吗？', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t// center: true\r\n\t\t\t\t}).then(() => {\r\n\r\n\t\t\t\t\tthis.$axios.post('/api/admin/category/deleteCategory', {\r\n\r\n\t\t\t\t\t\t\tid: row.id\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(res => {\r\n\r\n\t\t\t\t\t\t\tif (res.data.code == 1) {\r\n\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '删除成功!'\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tthis.getCategory()\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\r\n\t\t\t\t\t\t\tElMessage.error('删除失败')\r\n\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//得到当前栏目的父类栏目id\r\n\t\t\tgetPid(row){\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.form1.pid = row.id;\r\n\t\t\t\t\r\n\t\t\t\tthis.dialogFormVisible1 = true;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//添加子类栏目\r\n\t\t\taddSonCategory(){\r\n\t\t\t\t\t\t\r\n\t\t\t\tthis.$axios.post('/api/admin/category/addSonCategory',{\r\n\t\t\t\t\t\r\n\t\t\t\t\tpid:this.form1.pid,\r\n\t\t\t\t\tname:this.form1.name\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//关闭弹窗，重新请求数据填充\r\n\t\t\t\t\tthis.dialogFormVisible1 = false\r\n\t\t\t\t\tthis.getCategory()\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//跳转编辑栏目并传参\r\n\t\t\tupdateCategory(row){\r\n\t\t\t\t\r\n\t\t\t\tthis.$router.push({name:\"categoryEdit\",query:{id:row.id,name:row.name}});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\t\r\n\r\n\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getCategory()\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.demo-form-inline {\r\n\t\tfloat: right;\r\n\t}\r\n\r\n\t.el-table__expand-icon .el-icon-arrow-right:before {\r\n\t\tcontent: \"\\e723\";\r\n\t}\r\n</style>\n"]}]}