!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("vue")):"function"==typeof define&&define.amd?define("vue-ueditor-wrap",["vue"],n):"object"==typeof exports?exports["vue-ueditor-wrap"]=n(require("vue")):e["vue-ueditor-wrap"]=n(e.Vue)}("undefined"!=typeof self?self:this,(function(e){return function(){"use strict";var n={197:function(n){n.exports=e}},t={};function o(e){var r=t[e];if(void 0!==r)return r.exports;var i=t[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){o.r(r),o.d(r,{VueUeditorWrap:function(){return u},default:function(){return a},install:function(){return d},version:function(){return s}});var e,n=o(197),t=function(){function e(){this.listeners={}}var n=e.prototype;return n.on=function(e,n){void 0===this.listeners[e]&&(this.listeners[e]={triggered:!1,requested:!1,cbs:[]}),this.listeners[e].triggered&&n(),this.listeners[e].cbs.push(n)},n.emit=function(e){this.listeners[e]&&(this.listeners[e].triggered=!0,this.listeners[e].cbs.forEach((function(e){return e()})))},e}(),i=(0,n.defineComponent)({name:"vue-ueditor-wrap",props:{editorId:String,name:String,modelValue:{type:String,default:""},config:Object,mode:{type:String,default:"observer",validator:function(e){return-1!==["observer","listener"].indexOf(e)}},observerOptions:{type:Object,default:function(){return{attributes:!0,attributeFilter:["src","style","type","name"],characterData:!0,childList:!0,subtree:!0}}},observerDebounceTime:{type:Number,default:50,validator:function(e){return e>=20}},forceInit:Boolean,editorDependencies:{type:Array},editorDependenciesChecker:{type:Function}},emits:["update:modelValue","before-init","ready"],setup:function(e,o){var r,i,u,s=o.emit,d=!1,a=(0,n.ref)(),c=["ueditor.config.js","ueditor.all.min.js"],l=(0,n.toRef)(e,"modelValue");window.$loadEventBus||(window.$loadEventBus=new t);var f=function(){u=r.getContent(),s("update:modelValue",u)},p=function(){r.document.getElementById("baidu_pastebin")||(u=r.getContent(),s("update:modelValue",u))},m=function(){var n=e.editorId||"editor_"+function(e){for(var n="abcdefghijklmnopqrstuvwxyz",t="",o=0;o<8;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}();a.value.id=n,s("before-init",n),(r=window.UE.getEditor(n,e.config)).addListener("ready",(function(){var n,t,o,u;d?r.setContent(e.modelValue):(d=!0,s("ready",r),e.modelValue&&r.setContent(e.modelValue)),"observer"===e.mode&&window.MutationObserver?(i=new MutationObserver((n=p,t=e.observerDebounceTime,(u=function(){for(var e=this,r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];o&&clearTimeout(o),o=setTimeout((function(){n.apply(e,i)}),t)}).cancel=function(){void 0!==o&&clearTimeout(o)},u))).observe(r.body,e.observerOptions):r.addListener("contentChange",f)}))};return(0,n.watch)(l,(function(t){d?t===u||r.setContent(t||""):(e.forceInit||"undefined"!=typeof window)&&new Promise((function(n,t){if(e.editorDependencies&&e.editorDependenciesChecker&&e.editorDependenciesChecker())n();else if(!e.editorDependencies&&window.UE&&window.UE.getEditor&&window.UEDITOR_CONFIG&&0!==Object.keys(window.UEDITOR_CONFIG).length)n();else{var o,r=(e.editorDependencies||c).reduce((function(n,t){var o;/^((https?:)?\/\/)?[-a-zA-Z0-9]+(\.[-a-zA-Z0-9]+)+\//.test(t)||(t=((null==(o=e.config)?void 0:o.UEDITOR_HOME_URL)||"")+t);var r=t.split("."),i=r[r.length-1];return"js"===i?n.jsLinks.push(t):"css"===i&&n.cssLinks.push(t),n}),{jsLinks:[],cssLinks:[]}),i=r.jsLinks,u=r.cssLinks;Promise.all([Promise.all(u.map((function(e){return function(e){return new Promise((function(n,t){if(window.$loadEventBus.on(e,n),!1===window.$loadEventBus.listeners[e].requested){window.$loadEventBus.listeners[e].requested=!0;var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,o.onload=function(){window.$loadEventBus.emit(e)},o.onerror=t,document.getElementsByTagName("head")[0].appendChild(o)}}))}(e)}))),(o=i.map((function(e){return function(){return function(e){return new Promise((function(n,t){if(window.$loadEventBus.on(e,n),!1===window.$loadEventBus.listeners[e].requested){window.$loadEventBus.listeners[e].requested=!0;var o=document.createElement("script");o.src=e,o.onload=function(){window.$loadEventBus.emit(e)},o.onerror=t,document.getElementsByTagName("head")[0].appendChild(o)}}))}(e)}})),o.reduce((function(e,n){return e.then(n)}),Promise.resolve()))]).then((function(){return n()})).catch(t)}})).then((function(){a.value?m():(0,n.nextTick)((function(){return m()}))})).catch((function(){throw new Error("[vue-ueditor-wrap] UEditor 资源加载失败！请检查资源是否存在，UEDITOR_HOME_URL 是否配置正确！")}))}),{immediate:!0}),(0,n.onDeactivated)((function(){r&&r.removeListener("contentChange",f),i&&i.disconnect()})),(0,n.onUnmounted)((function(){i&&i.disconnect&&i.disconnect(),r&&r.destroy&&r.destroy()})),function(){return(0,n.createVNode)("div",null,[(0,n.createVNode)("div",{ref:a,name:e.name},null)])}}}),u=((e=i).install=function(n){var t=e.name;n.component(t,e),n.component(("-"+t).replace(/-(\w)/g,(function(e,n){return n?n.toUpperCase():""})),e)},e),s="3.0.3";function d(e){[u].forEach((function(n){n.install?e.use(n):n.name&&e.component(n.name,n)}))}var a={install:d,version:s}}(),r}()}));